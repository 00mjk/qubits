// Generated by CoffeeScript 1.10.0
(function() {
  module.exports = function(arg) {
    var commandHandlers, eventBus, eventStore, properties;
    eventStore = arg.eventStore, eventBus = arg.eventBus, commandHandlers = arg.commandHandlers;
    properties = {
      dispatch: {
        value: function(command) {
          var events, name;
          events = typeof commandHandlers[name = command.name] === "function" ? commandHandlers[name](command.message) : void 0;
          if (events != null) {
            eventStore.add(events);
            if (eventBus != null) {
              if (typeof eventBus.publish === "function") {
                eventBus.publish(events);
              }
            }
          }
          return events;
        }
      }
    };
    return Object.defineProperties({}, properties);
  };

}).call(this);
