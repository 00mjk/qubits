// Generated by CoffeeScript 1.10.0
(function() {
  var doAtSomePoint;

  doAtSomePoint = function(cb) {
    return setTimeout(cb, 0);
  };

  module.exports = function(listeners) {
    var properties, registerListener, registerListeners;
    if (listeners == null) {
      listeners = {};
    }
    registerListener = function(eventName, listener) {
      var listenersForEvent;
      listenersForEvent = listeners[eventName];
      if (listenersForEvent === void 0) {
        return listeners[eventName] = [listener];
      } else {
        return listenersForEvent.push(listener);
      }
    };
    registerListeners = function(mapping) {
      var eventName, ls, results;
      results = [];
      for (eventName in mapping) {
        ls = mapping[eventName];
        results.push(ls.forEach(function(listener) {
          return registerListener(eventName, listener);
        }));
      }
      return results;
    };
    properties = {
      registerListeners: {
        value: registerListeners
      },
      registerListener: {
        value: registerListener
      },
      publish: {
        value: function(event) {
          var ref;
          return (ref = listeners[event.name]) != null ? ref.forEach(function(listener) {
            return doAtSomePoint(function() {
              return listener(event);
            });
          }) : void 0;
        }
      }
    };
    return Object.defineProperties({}, properties);
  };

}).call(this);
